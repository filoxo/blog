---
title: "Bad Assumptions about Microfrontends"
date: 2019-07-20
tags: ['javascript']
---

There've been some surprisingly incorrect assumptions made about "microfrontends" since it became a buzzword. Microservices in the browser (I prefer this term over microfrontends) are a totally new paradigm but these bad takes seem to have quite a bit of reach. I'll tackle some of these in this post. 

## Multiple frameworks

> The idea really is that you might build a React app and I build a Vue app and we'll slap 'em together on the same page. I definitely come from an era where we laughed-then-winced when we found sites that used multiple versions of jQuery on the same page... We winced because that was a bucket full of JavaScript, mostly duplicated for no reason, causing bugs and slowing down the page. This doesn't seem all that much different.
>
> *Chris Coyier, https://css-tricks.com/micro-frontends/*

This is actually a **huge** mischaracterization. Think about this for backend services. Each app or service is independent so they *can* use a different framework or language. One service *can be* Ruby+Rails and another use Elixir+Phoenix. But in practice most companies will avoid this, it doesn't make sense to allow any and every language or framework. No different here. Standardizing on few languages/frameworks makes total sense!

> Your [developers] were so preoccupied with whether or not they could, they didn’t stop to think if they should.

Just because it *can be done*, does not mean it *should or needs* to be done. Most if not all of your apps should use a common set of frameworks and libraries. But realize that this possibility of using a different framework without high development costs and effort actually unlocks benefits! Namely, to migrate and experiment. I find that to be super cool! Let me paint those scenarios.

### Migrate

At every point in a company's life, they reach a point where the decision to use Technology X or Y that was made 5+ years ago no longer holds up. The maintainers do not see an easy way to move off of it. Using a front-end microservices architecture, you can begin migrating parts of the application to newer technologies and frameworks as each team or product is ready and able (the performance implications will be discussed below).

### Experimentation

Maybe Framework X is not quite that old, but your developers see new trends on the horizon. Or maybe an application has grown bloated and is a performance bottleneck and you would like to try out a newer, faster framework (something like [Svelte](https://github.com/sveltejs/svelte)). This sort of experimentation could allow products, user experiences, and DX to improve as technologies evolve and advance. These upgrades shouldn't require months and years!

## Multiple React roots

<blockquote class="twitter-tweet" data-conversation="none" data-lang="en"><p lang="und" dir="ltr"><a href="https://t.co/4VCG8cFxjc">pic.twitter.com/4VCG8cFxjc</a></p>&mdash; Dan Abramov (@dan_abramov) <a href="https://twitter.com/dan_abramov/status/1139157092420505600?ref_src=twsrc%5Etfw">June 13, 2019</a></blockquote>

The answer to Dan's question here is **yes**. This can definitely be considered "microfrontends" as each top-level app can be independent. But also this is totally dependent on a single framework, React. What happens if React is no longer the technology to use due to performance or licensing or age, or anything really? Being able to break free of and avoid [technological lock-in](https://en.wikipedia.org/wiki/Vendor_lock-in#Technology_lock-in) another **major benefit** of microservices in the browser.

## 50MB of JavaScript

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Someone let me perf. profile a site using &quot;microfrontends&quot;. <br/><br/>Memebait related: <a href="https://t.co/LMldrx14Ui">pic.twitter.com/LMldrx14Ui</a></p>&mdash; Sean Larkin (廖肖恩) (@TheLarkInn) <a href="https://twitter.com/TheLarkInn/status/1139281821810618369?ref_src=twsrc%5Etfw">June 13, 2019</a></blockquote>

I have to ask: _is a bloated app a unique characteristic of microfrontends?_ I know of many frontend applications that are extremely heavy that are _not microfrontends_, which is mostly due to misconfiguration of tooling or extra package code. So what gives with this criticism that implicitly claims that microservices are bloated by default?

It's true that 1 is greater than 2. Shipping two runtimes can be bad. I'd argue though that bad performance comes down to implementation, not architecture. There are many solutions to this problem, none of them impossible with microservices in the browser.

One interesting and future-facing solution is a proposed browser spec called [import maps](https://github.com/WICG/import-maps). It enables your JavaScript imports to be resolved *in the browser*. You would no longer need to bundle libraries into your build, and with the correct bundler configuration these dependencies can be shared across all of your apps. The file from which you `import React from 'react` or `import _ from lodash` is completely separate from your build, downloaded once, and cached! Performance does not have to be sacrificed for microfrontends' sake. If this appeals to you, check out [Single-spa](https://single-spa.js.org/) and it's [recommended setup](https://single-spa.js.org/docs/faq.html#is-there-a-recommended-setup) that leverages import-maps. 

Give an emerging pattern like microservices in the browser a chance. Don't buck against it just because it isn't the way you've done things. And, let go of your bad assumptions.